"use strict";const o=require("electron"),c=require("path");function d(n){const l=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const t in n)if(t!=="default"){const a=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(l,t,a.get?a:{enumerable:!0,get:()=>n[t]})}}return l.default=n,Object.freeze(l)}const s=d(c),i=s.dirname(__filename);let e=null;function r(){if(e=new o.BrowserWindow({width:1200,height:800,title:"CNC Jog Controls",webPreferences:{preload:s.join(i,"../preload/preload.js"),contextIsolation:!0,nodeIntegration:!1,webSecurity:!1,allowRunningInsecureContent:!0,experimentalFeatures:!0},show:!1}),e.once("ready-to-show",()=>{e==null||e.show()}),console.log("Environment check:",{NODE_ENV:process.env.NODE_ENV,isPackaged:o.app.isPackaged,__dirname:i}),!o.app.isPackaged)console.log("Development mode: Loading from Vite dev server..."),e.loadURL("http://localhost:5173");else{console.log("Production mode: Loading from built files...");const n=s.join(i,"../../dist/index.html");console.log(`Loading from: ${n}`),console.log(`File exists: ${require("fs").existsSync(n)}`),e.loadFile(n)}e.webContents.on("did-fail-load",(n,l,t,a)=>{console.error(`Failed to load ${a}: ${t} (${l})`)}),e.webContents.on("did-finish-load",()=>{console.log("Page finished loading successfully")}),o.app.isPackaged||e.webContents.openDevTools(),e.on("closed",()=>{e=null})}o.app.whenReady().then(()=>{o.app.setName("CNC Jog Controls"),r(),o.app.on("activate",()=>{o.BrowserWindow.getAllWindows().length===0&&r()})});o.app.on("window-all-closed",()=>{process.platform!=="darwin"&&o.app.quit()});o.ipcMain.handle("get-app-version",()=>o.app.getVersion());
